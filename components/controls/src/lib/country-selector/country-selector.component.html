<ng-container *ngIf="appearance === 'round'; else defaultInputTpl">
	<bp-round-input
		[formControl]="internalControl"
		[name]="name"
		[color]="color"
		[placeholder]="placeholder"
		[autocomplete]="countryAutocomplete"
		[throttle]="throttle"
		[debounce]="debounce"
	>
		<bp-input-prefix>
			<bp-country class="mr-2" compact round [src]="value || worldwide"> </bp-country>
		</bp-input-prefix>
	</bp-round-input>

	<bp-validation-error *ngIf="externalControl" [errors]="externalControl!.errors"> </bp-validation-error>
</ng-container>

<ng-template #defaultInputTpl>
	<bp-input
		[name]="name"
		[label]="label"
		[hint]="hint"
		[color]="color"
		[required]="!!required"
		[formControl]="internalControl"
		[placeholder]="placeholder"
		[autocomplete]="countryAutocomplete"
		[appearance]="appearance"
		[floatLabel]="floatLabel"
		[throttle]="throttle"
		[debounce]="debounce"
		[hideErrorText]="hideErrorText"
	>
		<bp-input-prefix>
			<bp-country class="mr-2" compact [src]="value || worldwide"> </bp-country>
		</bp-input-prefix>
	</bp-input>
</ng-template>

<mat-autocomplete #countryAutocomplete="matAutocomplete" [class]="panelClass">
	<div [@fadeInList]="filtered.length">
		<ng-container *ngFor="let country of filtered | take: 20">
			<mat-option *bpDelayedRender [value]="country.name" [bpTooltip]="country.displayName">
				<bp-country class="ml-1" [src]="country"></bp-country>
			</mat-option>
		</ng-container>
	</div>
</mat-autocomplete>
