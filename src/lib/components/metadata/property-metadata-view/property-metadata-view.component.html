<ng-container *ngIf="metadata.viewType !== FieldViewType.boolean; else booleanViewTypeTpl">
	<caption *ngIf="label">
		{{ metadata.label }}

		<mat-icon *ngIf="metadata.longHint"
				  class="sm"
				  [matTooltip]="metadata.longHint">
			help_outline
		</mat-icon>
	</caption>

	<div *ngIf="value === '' || value === undefined || value === null || value.length === 0; else valueTpl">
		<div *ngIf="metadata.viewType === FieldViewType.thumbnail; else emptyValueTpl"
			 class="thumbnail empty">
			<mat-icon>image</mat-icon>
		</div>

		<ng-template #emptyValueTpl>
			â€”
		</ng-template>
	</div>

	<ng-template #valueTpl>
		<div [ngSwitch]="metadata.viewType">
			<ng-container *ngSwitchCase="FieldViewType.text">
				{{ value.displayName || value.name || value }}
			</ng-container>

			<bp-country *ngSwitchCase="FieldViewType.country"
						[src]="value">
			</bp-country>

			<bp-payment-method-brand *ngSwitchCase="FieldViewType.paymentMethodBrand"
									 [src]="value">
			</bp-payment-method-brand>

			<ng-container *ngSwitchCase="FieldViewType.money">
				{{ value | currency:'USD':'':isInteger(value) ? '1.0-0' : null }}
			</ng-container>

			<ng-container *ngSwitchCase="FieldViewType.moment">
				{{ value | moment: metadata.viewFormatter ? metadata.viewFormatter(value) : 'LL LTS'}}
			</ng-container>

			<ng-container *ngSwitchCase="FieldViewType.currency">
				{{ value.symbol === value.code ? '' : value.symbol }} {{ value.code }}
			</ng-container>

			<ng-container *ngSwitchCase="FieldViewType.status">
				<span class="status-{{value.cssClass}}"
						[class.mr-1]="!compact"
						[class.circle-sm]="!compact"
						[class.circle]="compact"
						[matTooltip]="compact ? value.displayName : null">
				</span>
				<ng-container *ngIf="!compact">
					{{ value.displayName }}
				</ng-container>
			</ng-container>

			<ng-container *ngSwitchCase="FieldViewType.email">
				<a class="link"
				   bpTargetBlank
				   href="mailto:{{ value }}"
				   (click)="$event.stopPropagation()">
					{{ value }}
				</a>
			</ng-container>

			<ng-container *ngSwitchCase="FieldViewType.link">
				<a class="link"
				   bpTargetBlank
				   [href]="value"
				   (click)="$event.stopPropagation()">
					{{ value }}
				</a>
			</ng-container>

			<ng-container *ngSwitchCase="FieldViewType.booleanCircle">
				<ng-container *ngIf="metadata.viewFormatter && metadata.viewFormatter(value) as status">
					<span class="status-{{status.cssClass}}"
						  [class.mr-1]="!compact"
						  [class.circle-sm]="!compact"
						  [class.circle]="compact"
						  [matTooltip]="compact ? status.displayName : null">
					</span>
					<ng-container *ngIf="!compact">
						{{ status.displayName }}
					</ng-container>
				</ng-container>
				<span *ngIf="!metadata.viewFormatter"
					  class="circle status-{{value}}">
				</span>
			</ng-container>

			<ng-container *ngSwitchCase="FieldViewType.chip">
				<mat-chip-list *ngIf="value?.length"
							   [selectable]="false">
					<mat-chip *ngFor="let chip of value"
							  selected
							  [matTooltip]="chip.description">
						{{ chip.displayName || chip.name || chip }}
					</mat-chip>
				</mat-chip-list>
			</ng-container>

			<div *ngSwitchCase="FieldViewType.thumbnail"
				 class="thumbnail"
				 [style.background-image]="('url(' + value + ')') | safe:'style'">
			</div>
		</div>
	</ng-template>
</ng-container>

<ng-template #booleanViewTypeTpl>
	<span *ngIf="value">
		<mat-icon class="mr-1">check</mat-icon>
		{{ metadata.label }}
	</span>
</ng-template>
