<mat-form-field [appearance]="appearance">
	<mat-label *ngIf="label">{{ label }}</mat-label>

	<textarea *ngIf="textarea === ''; else inputTpl"
			  matInput
			  [attr.name]="name"
			  [formControl]="internalControl"
			  [placeholder]="placeholder"
			  [required]="required">
	</textarea>

	<ng-template #inputTpl>
		<input *ngIf="autocomplete; else defaultInputTpl"
			   matInput
			   [attr.name]="name"
			   [formControl]="internalControl"
			   [placeholder]="placeholder"
			   [required]="required"
			   [value]="value"
			   [matAutocomplete]="autocomplete">

		<ng-template #defaultInputTpl>
			<input matInput
				   [attr.name]="name"
				   [formControl]="internalControl"
				   [placeholder]="placeholder"
				   [required]="required"
				   [bpTextMask]="mask" />
		</ng-template>
	</ng-template>

	<div class="close-btn-wrapper">
		<div [@slideRight]="(internalControl.valueChanges | async) ? 'on' : 'off'">
			<button type="button"
					mat-icon-button
					[disabled]="internalControl.disabled"
					(click)="internalControl.setValue(null)">
				<mat-icon>close</mat-icon>
			</button>
		</div>
	</div>

	<mat-hint *ngIf="hint">{{ hint }}</mat-hint>

	<mat-error bpFieldError [bpFieldErrorSuppress]="hideErrorText"></mat-error>
</mat-form-field>
