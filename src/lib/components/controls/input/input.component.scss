@import 'imports';

$close-btn-size: 34px; // the height of the input
$close-btn-margin: 5px;
$control-radius: 30px;

:host ::ng-deep {
	display: inline-block;

	.mat-form-field {
		width: 100%;

		.mat-form-field-flex {
			padding-right: $close-btn-size + $close-btn-margin * 2;
		}

		.close-btn-wrapper {
			display: flex;
			align-items: center;
			justify-content: center;
			position: absolute;
			top: -1px;
			right: 0;
			bottom: 0;
			overflow: hidden;

			> div {
				transform: translate3d(100%, 0px, 0px);
			}

			.mat-icon-button {
				@include matIconSize($close-btn-size !important); // the height of the input

				&:hover .mat-button-focus-overlay {
					opacity: 0.1;
				}

				.mat-icon {
					font-size: 20px;
					width: auto;
					height: auto;
				}
			}
		}

		&.mat-form-field-appearance-outline .close-btn-wrapper {
			top: -8px;
			right: -($close-btn-size + $close-btn-margin);
		}

		&.mat-form-field-appearance-standard {
			.mat-form-field-flex {
				padding-right: $close-btn-size;
			}

			.close-btn-wrapper {
				top: -3px;
				right: -$close-btn-size;
			}
		}

		&.mat-form-field-appearance-fill .close-btn-wrapper {
			top: -10px;
			right: -($close-btn-size + $close-btn-margin);
		}
	}
}

:host(.pending) ::ng-deep {
	.mat-form-field-flex {
		&:hover,
		&:focus {
			+ .mat-form-field-underline:after {
				opacity: 1;
			}
		}
	}

	.mat-form-field-underline {
		&:before,
		&:after {
			content: '';
			height: 1px;
			background: mat-color($amber-palette);
			position: absolute;
			bottom: 0;
			width: 100%;
			transform-origin: 50%;
			animation: pulsing 1.4s linear infinite;
		}

		&:after {
			transition: opacity $transition-props;
			opacity: 0;
			height: 2px;
		}
	}
}
