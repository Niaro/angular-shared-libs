<mat-form-field [appearance]="appearance">
	<mat-label *ngIf="label">
		{{ label }}
		<span *ngIf="required"
			  class="mat-placeholder-required mat-form-field-required-marker">
			*
		</span>
	</mat-label>

	<mat-chip-list #chipList>
		<mat-chip *ngFor="let v of value"
				  #chip
				  @fade
				  [color]="color"
				  [matTooltip]="v.description"
				  [removable]="true"
				  (removed)="remove(v)">
			{{ getDisplayName(v) }}
			<mat-icon matChipRemove>cancel</mat-icon>
		</mat-chip>

		<input #input
			   [formControl]="internalControl"
			   [attr.name]="name"
			   [placeholder]="placeholder"
			   [required]="required"
			   [matAutocomplete]="autocomplete"
			   [matChipInputFor]="chipList"
			   [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
			   [matChipInputAddOnBlur]="true"
			   (matChipInputTokenEnd)="add($event)">
	</mat-chip-list>

	<mat-autocomplete #autocomplete="matAutocomplete"
					  (optionSelected)="selected($event)">
		<mat-option *ngFor="let v of filtered"
					class="chip-autocomplete-option"
					[class.has-description]="v.description"
					[value]="v">
			<div>{{ getDisplayName(v) }}</div>
			<div *ngIf="v.description"
				 class="description mat-caption">
				{{ v.description }}
			</div>
		</mat-option>
	</mat-autocomplete>

	<mat-hint *ngIf="hint">{{ hint }}</mat-hint>

	<mat-error bpFieldError
			   [bpFieldErrorSuppress]="hideErrorText">
	</mat-error>
</mat-form-field>
