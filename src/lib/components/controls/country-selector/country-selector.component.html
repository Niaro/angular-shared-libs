<ng-container *ngIf="appearance === 'round'; else defaultInputTpl">
	<bp-round-input [formControl]="internalControl"
					[name]="name"
					[color]="color"
					[placeholder]="placeholder"
					[autocomplete]="countryAutocomplete">
		<bp-input-prefix>
			<bp-country class="mr-2"
						compact
						hideTooltip
						round
						[src]="value || worldwide">
			</bp-country>
		</bp-input-prefix>
	</bp-round-input>

	<bp-validation-error *ngIf="externalControl"
						 [errors]="externalControl!.errors">
	</bp-validation-error>
</ng-container>

<ng-template #defaultInputTpl>
	<bp-input [name]="name"
			  [label]="label"
			  [hint]="hint"
			  [color]="color"
			  [required]="required"
			  [formControl]="internalControl"
			  [placeholder]="placeholder"
			  [autocomplete]="countryAutocomplete"
			  [appearance]="appearance"
			  [throttle]="throttle">
		<bp-input-prefix>
			<bp-country class="mr-2"
						compact
						hideTooltip
						[src]="value || worldwide">
			</bp-country>
		</bp-input-prefix>
	</bp-input>
</ng-template>

<mat-autocomplete #countryAutocomplete="matAutocomplete"
				  [class]="panelClass">
	<ng-container *ngFor="let country of filtered">
		<mat-option *bpDelayedRender
					[value]="country.name"
					[matTooltip]="country === UnitedStatesMinorOutlyingIslands ? country.displayName : ''">
			<bp-country class="ml-1" [src]="country"></bp-country>
		</mat-option>
	</ng-container>
</mat-autocomplete>
