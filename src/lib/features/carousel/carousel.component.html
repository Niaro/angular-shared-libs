<div class="main-row">
	<div class="viewport"
	     [style.height.px]="viewportHeight$ | async">
		<ul #slidesContainer
		    class="slides"
		    [class.canceled-slide-animation]="(animate$ | async) === false"
		    [@fadeInList]="(items$ | async).length"
		    [@.disabled]="!slideInAnimation"
		    cdkDropList
		    cdkDropListOrientation="horizontal"
		    (cdkDropListDropped)="drop($event)">
			<li #slide
			    *ngFor="let item of (items$ | async); let i = index"
			    class="carousel-slide"
			    [ngClass]="slideClass"
			    cdkDrag
			    [cdkDragDisabled]="!sortable || (items$ | async).length === 1">
				<ng-container *ngTemplateOutlet="template; context: { '\$implicit': item, index: i }"></ng-container>
			</li>
		</ul>
	</div>

	<button *ngIf="isShowArrows && (showArrowButtons$ | async)"
	        type="button"
	        class="btn-arrow prev"
	        [class.disabled]="prevButtonDisabled$ | async"
	        [ngClass]="['arrow-type-' + arrowType, 'arrow-size-' + arrowSize]"
	        (click)="activatePrev()">
		<span matRipple
		      matRippleCentered="centered"
		      [matRippleDisabled]="prevButtonDisabled$ | async">
			<ng-container *ngTemplateOutlet="arrowsTpl"></ng-container>
		</span>
	</button>

	<button *ngIf="isShowArrows && (showArrowButtons$ | async)"
	        type="button"
	        class="btn-arrow next"
	        [class.disabled]="nextButtonDisabled$ | async"
	        [ngClass]="['arrow-type-' + arrowType, 'arrow-size-' + arrowSize]"
	        (click)="activateNext()">
		<span matRipple
		      matRippleCentered="centered"
		      [matRippleDisabled]="nextButtonDisabled$ | async">
			<ng-container *ngTemplateOutlet="arrowsTpl"></ng-container>
		</span>
	</button>
</div>

<div *ngIf="isShowBullets"
     class="bullets"
     [style.visibility]="(items$ | async).length > (currentItemsPerView$ | async) ? null : 'hidden'">
	<button type="button"
	        class="bullet"
	        *ngFor="let item of (items$ | async); let i = index"
	        [class.active]="(slidesVisibility$ | async).firstFullyVisible <= i && i <= (slidesVisibility$ | async).lastFullyVisible"
	        (click)="activateIndex(i)">
	</button>
</div>

<ng-template #arrowsTpl>
	<svg *ngIf="arrowType === 'circled'"
	     class="icon circled-arrow"
	     viewBox="0 0 7 12">
		<path d="M.5 11.7c-.1 0-.3-.1-.4-.2-.2-.1-.1-.5.1-.6L5.9 6 .2 1.1C0 1-.1.6.1.4.3.2.6.2.8.3l5.9 5.1c.2.2.3.4.3.6s-.1.4-.3.6L.8 11.7H.5zm5.6-5.5z" />
	</svg>

	<svg *ngIf="arrowType === 'inner'"
	     class="icon inner"
	     viewBox="0 0 20 16">
		<path d="M18.5 9H1c-.5 0-1-.4-1-1s.4-1 1-1h17.5c.6 0 1 .4 1 1s-.4 1-1 1z" />
		<path d="M12 16c-.2 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l6-6.3-6-6.3c-.4-.4-.4-1 0-1.4.4-.4 1-.4 1.4 0L20 8l-7.3 7.7c-.2.2-.4.3-.7.3z" />
	</svg>
</ng-template>
